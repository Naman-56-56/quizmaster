{% extends 'base.html' %}

{% block title %}Quiz Created - {{ quiz.title }}{% endblock %}

{% block content %}
<div class="min-h-screen gradient-bg flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl w-full">
        <!-- Success Message -->
        <div class="text-center mb-8">
            <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 bounce-in">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h1 class="text-4xl font-bold text-white mb-4">Quiz Created Successfully!</h1>
            <p class="text-xl text-white/90">Your quiz "{{ quiz.title }}" is ready to play</p>
        </div>

        <!-- Quiz Details Card -->
        <div class="glass-effect rounded-2xl p-8 mb-8">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-white mb-2">{{ quiz.title }}</h2>
                {% if quiz.description %}
                <p class="text-white/80">{{ quiz.description }}</p>
                {% endif %}
            </div>
            
            <!-- Game Code -->
            <div class="bg-white/20 rounded-lg p-6 mb-6">
                <div class="text-center">
                    <p class="text-white/80 mb-2">Game Code</p>
                    <div class="text-4xl font-bold text-white tracking-wider mb-4" id="gameCode">{{ quiz.game_code }}</div>
                    <button onclick="copyGameCode()" 
                            class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Copy Code
                    </button>
                </div>
            </div>
            
            <!-- QR Code -->
            {% if quiz.qr_code %}
            <div class="text-center mb-6">
                <p class="text-white/80 mb-4">Or scan QR code to join:</p>
                <div class="bg-white p-4 rounded-lg inline-block">
                    <img src="{{ quiz.qr_code.url }}" alt="QR Code" class="w-48 h-48 mx-auto">
                </div>
            </div>
            {% endif %}
            
            <!-- Quiz Stats -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-white/10 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-white">{{ quiz.quiz_data.questions|length }}</div>
                    <div class="text-white/80">Questions</div>
                </div>
                <div class="bg-white/10 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-white">{{ quiz.time_per_question }}s</div>
                    <div class="text-white/80">Per Question</div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="space-y-4">
            <a href="{% url 'host_game' quiz.game_code %}" 
               class="block w-full bg-white text-indigo-600 font-semibold py-4 px-6 rounded-lg text-center hover:bg-gray-100 transition-colors">
                Host Game
            </a>
            
            <div class="grid grid-cols-2 gap-4">
                <a href="{% url 'create_quiz' %}" 
                   class="block bg-white/20 text-white font-semibold py-3 px-6 rounded-lg text-center hover:bg-white/30 transition-colors">
                    Create Another
                </a>
                <a href="{% url 'home' %}" 
                   class="block bg-white/20 text-white font-semibold py-3 px-6 rounded-lg text-center hover:bg-white/30 transition-colors">
                    Home
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function copyGameCode() {
    const gameCode = document.getElementById('gameCode').textContent;
    navigator.clipboard.writeText(gameCode).then(() => {
        QuizUtils.showNotification('Game code copied to clipboard!', 'success');
    }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = gameCode;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        QuizUtils.showNotification('Game code copied to clipboard!', 'success');
    });
}
</script>
{% endblock %}
